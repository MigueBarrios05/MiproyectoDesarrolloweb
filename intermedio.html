<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <title>Curso de Trading Intermedio</title>
</head>
<body class="bg-light text-dark">
    <header class="bg-gradient text-white py-4 shadow" style="background: linear-gradient(90deg, #6610f2 60%, #6f42c1 100%);">
        <div class="container text-center">
            <h1 class="fw-bold display-4 mb-2">Curso de Trading Intermedio</h1>
            <p class="lead mb-0">¡Lleva tus habilidades de trading al siguiente nivel!</p>
        </div>
    </header>

    <main class="container my-5">
        <!-- Módulos -->
        <section id="modulo1" class="modulo">
            <div class="card border-0 shadow-lg rounded-4 futuristic-card mb-4">
                <div class="card-header bg-primary bg-gradient text-white fw-bold fs-4 rounded-top-4 border-0">
                    🔹 Módulo 1: Psicología del Trading
                </div>
                <div class="card-body">
                    <h5 class="fw-bold text-primary">¿Qué aprenderás?</h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">El papel de las emociones en el éxito o fracaso del trader.</li>
                        <li class="list-group-item">Cómo dominar la disciplina, controlar el miedo, la codicia y el estrés.</li>
                        <li class="list-group-item">Técnicas para desarrollar una mentalidad profesional y evitar el "overtrading".</li>
                    </ul>
                    <p>El éxito en el trading no depende solo del conocimiento técnico, sino de la capacidad emocional del operador. Muchas pérdidas se deben a decisiones impulsivas. Este módulo proporciona herramientas para que el estudiante mantenga la calma y siga su plan de trading sin dejarse llevar por las emociones.</p>
                </div>
                
                                <button class="btn btn-primary" onclick="mostrarModulo(2)">Siguiente</button>

            </div>
        </section>
        <section id="modulo2" class="modulo" style="display: none;">

            <div class="card border-0 shadow-lg rounded-4 futuristic-card mb-4">
                <div class="card-header bg-primary bg-gradient text-white fw-bold fs-4 rounded-top-4 border-0">
                    🔹 Módulo 2: Análisis Técnico Avanzado
                </div>

                <div class="card-body">
                    <h5 class="fw-bold text-primary">¿Qué aprenderás?</h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">Identificación de patrones gráficos complejos como el Hombro-Cabeza-Hombro, banderas y cuñas.</li>
                        <li class="list-group-item">Lectura de velas japonesas avanzadas y comportamiento del precio.</li>
                        <li class="list-group-item">Aplicación de indicadores como MACD, ADX, RSI, y medias móviles cruzadas.</li>
                    </ul>
                    <p>El análisis técnico avanzado permite predecir con mayor precisión los movimientos del mercado. Aprenderás a leer mejor los gráficos, comprender señales de entrada/salida, y usar herramientas técnicas para construir estrategias más sólidas.</p>
                </div>
                    <button class="btn btn-secondary" onclick="mostrarModulo(1)">Anterior</button>
                    <button class="btn btn-primary" onclick="mostrarModulo(3)">Siguiente</button>
            </div>
</section>

<section id="modulo3" class="modulo" style="display: none;">
            <div class="card border-0 shadow-lg rounded-4 futuristic-card mb-4">
                <div class="card-header bg-primary bg-gradient text-white fw-bold fs-4 rounded-top-4 border-0">
                    🔹 Módulo 3: Análisis Fundamental en Trading
                </div>
                <div class="card-body">
                    <h5 class="fw-bold text-primary">¿Qué aprenderás?</h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">Cómo los datos macroeconómicos (PIB, tasas de interés, inflación) impactan en los mercados.</li>
                        <li class="list-group-item">Lectura e interpretación de noticias financieras.</li>
                        <li class="list-group-item">Cómo usar un calendario económico para planificar operaciones.</li>
                    </ul>
                    <p>Además del análisis gráfico, los traders intermedios deben entender cómo los eventos económicos afectan los precios. Este módulo te enseñará a estar atento a los momentos clave del mercado y actuar con anticipación frente a las noticias.</p>
                </div>
                <button class="btn btn-secondary" onclick="mostrarModulo(2)">Anterior</button>
                <button class="btn btn-primary" onclick="mostrarModulo(4)">Siguiente</button>
            </div>
            </section>

            <section id="modulo4" class="modulo" style="display: none;">
            <div class="card border-0 shadow-lg rounded-4 futuristic-card mb-4">
                <div class="card-header bg-primary bg-gradient text-white fw-bold fs-4 rounded-top-4 border-0">
                    🔹 Módulo 4: Gestión del Riesgo y Capital
                </div>
                <div class="card-body">
                    <h5 class="fw-bold text-primary">¿Qué aprenderás?</h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">Cálculo del tamaño de posición según el riesgo y el capital disponible.</li>
                        <li class="list-group-item">Uso de ratios como el riesgo/beneficio y esperanza matemática.</li>
                        <li class="list-group-item">Diversificación, stop loss, y técnicas para evitar grandes pérdidas.</li>
                    </ul>
                    <p>No basta con tener buenas entradas; sin una adecuada gestión del riesgo, cualquier cuenta puede irse a cero. Este módulo te enseñará a proteger tu dinero y a operar de forma profesional, controlando la exposición por operación y usando herramientas de protección.</p>
                </div>
                <button class="btn btn-secondary" onclick="mostrarModulo(3)">Anterior</button>
                <button class="btn btn-primary" onclick="mostrarModulo(5)">Siguiente</button>
            </div>
            </section>
            <section id="modulo5" class="modulo" style="display: none;">
            <div class="card border-0 shadow-lg rounded-4 futuristic-card mb-4">
                <div class="card-header bg-primary bg-gradient text-white fw-bold fs-4 rounded-top-4 border-0">
                    🔹 Módulo 5: Estrategias de Trading Intermedio
                </div>
                <div class="card-body">
                    <h5 class="fw-bold text-primary">¿Qué aprenderás?</h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">Estrategias basadas en rompimientos, retrocesos y scalping.</li>
                        <li class="list-group-item">Cómo combinar indicadores para confirmar señales.</li>
                        <li class="list-group-item">Análisis multi temporal para identificar entradas más precisas.</li>
                    </ul>
                    <p>Aquí se aplican todos los conocimientos técnicos en estrategias concretas que puedes practicar. También se enseña cómo adaptar una estrategia al estilo personal del trader y cómo evaluar su efectividad mediante el backtesting.</p>
                </div>
                <button class="btn btn-secondary" onclick="mostrarModulo(4)">Anterior</button>
                <button class="btn btn-primary" onclick="mostrarModulo(6)">Siguiente</button>
            </div>
        </section>

        <!-- Evaluación Final -->
        <section id="modulo6" class="modulo" style="display: none;">   
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header bg-gradient bg-success text-white fw-bold fs-4 rounded-top-4 border-0">
                    🎓 Evaluación Final del Curso
                </div>
                <div class="card-body">
                    <form id="evaluacion-final">
                        <!-- Preguntas de selección múltiple -->
                        <div class="mb-3">
                            <label class="fw-bold">1. ¿Qué emoción es más peligrosa durante una racha ganadora en trading?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p1" value="A">
                                <label class="form-check-label">A) Miedo</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p1" value="B">
                                <label class="form-check-label">B) Codicia</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p1" value="C">
                                <label class="form-check-label">C) Aburrimiento</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p1" value="D">
                                <label class="form-check-label">D) Esperanza</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">2. ¿Cuál de estos patrones sugiere una reversión bajista?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p2" value="A">
                                <label class="form-check-label">A) Triángulo ascendente</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p2" value="B">
                                <label class="form-check-label">B) Bandera alcista</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p2" value="C">
                                <label class="form-check-label">C) Hombro-cabeza-hombro</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p2" value="D">
                                <label class="form-check-label">D) Cuña ascendente</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">3. ¿Qué indicador se utiliza para medir la fuerza de una tendencia?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p3" value="A">
                                <label class="form-check-label">A) RSI</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p3" value="B">
                                <label class="form-check-label">B) MACD</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p3" value="C">
                                <label class="form-check-label">C) ADX</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p3" value="D">
                                <label class="form-check-label">D) Estocástico</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">4. En un gráfico de velas, ¿qué indica una vela envolvente bajista?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p4" value="A">
                                <label class="form-check-label">A) Continuación de la tendencia alcista</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p4" value="B">
                                <label class="form-check-label">B) Reversión de la tendencia alcista</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p4" value="C">
                                <label class="form-check-label">C) Indecisión en el mercado</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p4" value="D">
                                <label class="form-check-label">D) Aumento de la volatilidad</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">5. ¿Qué representa un cruce dorado en análisis técnico?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p5" value="A">
                                <label class="form-check-label">A) Señal de compra</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p5" value="B">
                                <label class="form-check-label">B) Señal de venta</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p5" value="C">
                                <label class="form-check-label">C) Indecisión del mercado</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p5" value="D">
                                <label class="form-check-label">D) Aumento del volumen</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">6. ¿Cuál es el principal objetivo de la gestión del riesgo?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p6" value="A">
                                <label class="form-check-label">A) Maximizar ganancias</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p6" value="B">
                                <label class="form-check-label">B) Proteger el capital</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p6" value="C">
                                <label class="form-check-label">C) Aumentar la volatilidad</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p6" value="D">
                                <label class="form-check-label">D) Reducir el apalancamiento</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">7. ¿Qué es un stop loss?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p7" value="A">
                                <label class="form-check-label">A) Una orden para comprar</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p7" value="B">
                                <label class="form-check-label">B) Una orden para vender</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p7" value="C">
                                <label class="form-check-label">C) Una orden para cerrar una posición con pérdida</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p7" value="D">
                                <label class="form-check-label">D) Una orden para cerrar una posición con ganancia</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">8. ¿Cuál es la función principal de un bróker en el trading?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p8" value="A">
                                <label class="form-check-label">A) Proporcionar información de mercado</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p8" value="B">
                                <label class="form-check-label">B) Ejecutar órdenes de compra y venta</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p8" value="C">
                                <label class="form-check-label">C) Ofrecer asesoramiento financiero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p8" value="D">
                                <label class="form-check-label">D) Proporcionar capital para operar</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">9. ¿Qué es el análisis fundamental?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p9" value="A">
                                <label class="form-check-label">A) Estudio de gráficos y patrones</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p9" value="B">
                                <label class="form-check-label">B) Análisis de datos económicos y financieros</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p9" value="C">
                                <label class="form-check-label">C) Evaluación de la psicología del trader</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p9" value="D">
                                <label class="form-check-label">D) Estudio de la historia del mercado</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">10. ¿Qué representa un calendario económico en trading?</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p10" value="A">
                                <label class="form-check-label">A) Una herramienta para anotar operaciones</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p10" value="B">
                                <label class="form-check-label">B) Un sitio para medir spread</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p10" value="C">
                                <label class="form-check-label">C) Una lista de eventos relevantes para operar</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p10" value="D">
                                <label class="form-check-label">D) Un gráfico de velas</label>
                            </div>
                        </div>

                        <!-- Preguntas de verdadero/falso -->
                        <div class="mb-3">
                            <label class="fw-bold">11. El miedo puede provocar que el trader cierre operaciones con ganancia prematuramente.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p11" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p11" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">12. Un trader debe evitar operar cuando está emocionalmente afectado.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p12" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p12" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">13. La diversificación en trading siempre garantiza ganancias.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p13" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p13" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">14. El análisis técnico se basa únicamente en datos pasados del precio.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p14" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p14" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">15. Un alto apalancamiento aumenta el riesgo en las operaciones.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p15" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p15" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">16. Las noticias económicas no afectan el mercado de divisas.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p16" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p16" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">17. La paciencia es una virtud importante en el trading.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p17" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p17" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">18. Es recomendable operar sin un plan de trading.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p18" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p18" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">19. El análisis de la acción del precio es fundamental en el trading.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p19" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p19" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="fw-bold">20. Usar una cuenta demo permite practicar sin riesgo financiero.</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p20" value="V">
                                <label class="form-check-label">Verdadero</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="p20" value="F">
                                <label class="form-check-label">Falso</label>
                            </div>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-secondary" onclick="mostrarModulo(5)">Anterior</button>
                            <button type="button" class="btn btn-primary btn-lg px-5" onclick="evaluarCurso()">Enviar y ver resultado</button>
                        </div>
                        <div id="resultado-evaluacion" class="mt-4"></div>
                        <div class="text-center mt-4">
                            
                        </div>
                    </form>
                </div>

            </div>
        </section>
    </main>
    <script src="scripts/moduloss.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Respuestas correctas para la evaluación
        const respuestasCorrectas = {
            p1: "B",
            p2: "C",
            p3: "B",
            p4: "C",
            p5: "A",
            p6: "B",
            p7: "B",
            p8: "C",
            p9: "C",
            p10: "C",
            p11: "V",
            p12: "F",
            p13: "F",
            p14: "F",
            p15: "V",
            p16: "F",
            p17: "V",
            p18: "F",
            p19: "V",
            p20: "V"
        };

        function calcularRespuestasCorrectas() {
            let correctas = 0;

            for (const [pregunta, respuestaCorrecta] of Object.entries(respuestasCorrectas)) {
                const seleccionada = document.querySelector(`input[name="${pregunta}"]:checked`);
                if (seleccionada && seleccionada.value === respuestaCorrecta) {
                    correctas++;
                }
            }

            return correctas;
        }

        function evaluarCurso() {
            const correctas = calcularRespuestasCorrectas();
            const totalPreguntas = Object.keys(respuestasCorrectas).length;

            if (correctas >= 15) {
                alert(`¡Felicidades! Obtuviste ${correctas}/${totalPreguntas} respuestas correctas. Tu certificado será generado.`);
                generarCertificado(); // Llama a la función para generar el certificado
            } else {
                alert(`Obtuviste ${correctas}/${totalPreguntas} respuestas correctas. Te recomendamos repasar los módulos y volver a intentarlo.`);
            }
        }

        function generarCertificado() {
            const id_usuario = localStorage.getItem('id_usuario');
            const id_curso = 2; // ID del curso intermedio

            if (!id_usuario) {
                alert("Error: No se encontró el ID del usuario. Por favor, inicia sesión.");
                console.error("ID de usuario no encontrado en localStorage.");
                return;
            }

            console.log("Datos enviados al backend:", { id_usuario, id_curso });

            fetch('http://localhost:3000/api/certificado/generar', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id_usuario, id_curso })
            })
            .then(res => {
                console.log("Respuesta del servidor (raw):", res);
                debugger; // Pausa la ejecución aquí para inspeccionar `res`
                if (!res.ok) {
                    return res.json().then(err => {
                        console.error("Error del servidor (detalles):", err);
                        throw new Error(err.error || 'Error desconocido en el servidor');
                    });
                }
                return res.json();
            })
            .then(data => {
                console.log("Certificado generado exitosamente (data):", data);
                alert("¡Certificado generado con éxito! Ahora puedes verlo en tu perfil.");
                window.location.href = "Usuario.html";
            })
            .catch(err => {
                console.error("Error al generar el certificado:", err);
                alert("Hubo un error al generar el certificado: " + err.message);
            });
        }
    </script>
</body>
</html>